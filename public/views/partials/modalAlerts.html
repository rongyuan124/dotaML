<div>
    <div class="modal-header">
        <button type="button" class="close" ng-click="close()"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">{{device.deviceName}} Alerts</h4>
    </div>
    <div class="modal-body" style="overflow-y:auto">

        <tabset>
            <tab ng-repeat="sensor in device.sensorData" heading="{{sensor.tslabel}}" select="loadTab(sensor.paramId)" active="$first">
                <br>
                <form ng-submit="createTrigger()" >
                    <div class="form-group form-inline">
                        <div class="form-group">
                            <label>Type</label>
                            <select class="form-control" ng-model="newTrigger.comparator" required>
                                <option value="gt">&gt; Greater Than</option>
                                <option value="lt">&lt; Less Than</option>
                            </select>

                        </div>

                        <div class="form-group">
                            <label class="">Threshold</label>
                            <input style="width:100px" class="form-control" type="number" ng-model="newTrigger.threshold" required>
                        </div>
                        <div class="form-group">
                            <label class="">Delay (sec)</label>
                            <input style="width:100px" class="form-control" type="number" ng-model="newTrigger.delay" required>
                        </div>

                        <div ng-if="device.isOwner" class="form-group">
                            <div class="check-box">
                                <label>
                                    <input type="checkbox" ng-model="newTrigger.global">
                                    Apply to all users
                                </label>
                            </div>
                        </div>

                    </div>
                    <div class="form-group form-inline">
                        <div class="form-group">
                            <div class="check-box">
                                <label>
                                    <input type="checkbox" ng-model="newTrigger.action.email"> Email
                                </label>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="check-box">
                                <label>
                                    <input type="checkbox" ng-model="newTrigger.action.text" > Text Message
                                </label>
                            </div>
                        </div>

                        <!--
                                    <div class="form-group">
                                        <div class="check-box">
                                            <label >
                                                <input type="checkbox"  ng-model="newTrigger.action.tsswitch"> Switch
                                            </label>
                                        </div>
                                    </div>
                                    -->


                        <!--           <div class="form-group" ng-show="newTrigger.action.tsswitch">
                                       <select class="form-control" ng-model="newTrigger.action.tsswitchName">
                                           <option ng-repeat="switch in switchList">{{switch.deviceName}}</option>
                                       </select>
                                   </div>-->

                        <div class="form-group" ng-show="newTrigger.action.tsswitch">
                            <select class="form-control" ng-model="newTrigger.action.tsswitchObj"
                                    ng-options="switch.deviceName for switch in switchList">
                            </select>
                        </div>

                        <input type="submit" class="btn  btn-primary" value="Create"></input>
                    </div>

                </form>

                <label> Available triggers: </label>
                <div ng-repeat="trigger in triggerList">
                    <span>{{trigger.comparator=='gt' ? '&gt':'&lt'}} {{trigger.threshold}}</span>
                    <i ng-if="trigger.action.email" class="glyphicon glyphicon-envelope"></i>
                    <i ng-if="trigger.action.text" class="glyphicon glyphicon-phone"></i>
                    <i ng-if="trigger.action.tsswitch" class="glyphicon glyphicon-flash"></i>
                    <span ng-if="trigger.action.tsswitch">{{trigger.action.tsswitchObj.deviceName}}</span>
                    <span>Delay: {{trigger.delay/1000}} seconds</span>
                    <span class="pull-right">
                        <span ng-if="trigger.global"> created by {{trigger.user.firstName}} {{trigger.user.lastName}}</span>
                        <i ng-if="device.isOwner " ng-click="deleteTrigger(trigger._id,$index)" class="glyphicon glyphicon-trash" href=""></i>
                    </span>
                </div>
            </tab>
            <tab heading="Online/Offline">
                <br>
                <form ng-submit="updateMiscAlerts()" >
                    <div class="form-group form-inline">
                        <div class="form-group">
                            <label>Online alert</label>
                            <input type="checkbox" ng-model="device.alerts.online.enabled">
                        </div>
                        <br>
                        <div class="form-group">
                            <label>Offline alert</label>
                            <input type="checkbox" ng-model="device.alerts.offline.enabled">
                            <label class="">Delay (sec)</label>
                            <input style="width:100px" class="form-control" type="number" ng-model="device.alerts.offline.delay" required>
                        </div>
                        <br>
                        <input type="submit" class="btn  btn-primary" value="Update">
                    </div>

                </form>
            </tab>
        </tabset>


    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-primary" ng-click="close()">Close</button>
    </div>

</div>